#!/bin/sh
#

# https://docs.python.org/2/using/cmdline.html#envvar-PYTHONUSERBASE
# Set up to use site directory at: $EB_ROOT/software/EasyBuild/2.5.0/lib/python2.7/site-packages

# Put the following in your .profile to use eb
#
# # ------- Set up for lmod (and lua)
# export EB_ROOT=$HOME/eb
# eval $($EB_ROOT/bin/luarocks path --bin)
# source $EB_ROOT/lmod/lmod/init/profile
#
# # -------- Set up for easybuild
# export PATH=$PATH:$EB_ROOT/lmod/lmod/libexec	# Add lmod to path
# export MODULEPATH=/Users/rpfische/eb/modules/all
# export EASYBUILD_MODULES_TOOL=Lmod
# export EASYBUILD_INSTALLPATH=$EB_ROOT


#	PATH=$PATH \
#	LMOD_CMD=$LMOD_CMD \
#	MODULESHOME=$MODULESHOME \
#	LMOD_DIR=$LMOD_DIR \

#	PYTHONUSERBASE=$EB_ROOT/software/EasyBuild/2.5.0 \

env \
	MODULEPATH=$EB_ROOT/modules/all \
	EASYBUILD_MODULES_TOOL=Lmod \
	EASYBUILD_INSTALLPATH=$EB_ROOT \
	PYTHONPATH=$EB_ROOT/git/easybuild-framework:$EB_ROOT/git/easybuild-easyblocks:$EB_ROOT/git/vsc-base/lib:$HOME/ebx/pylib \
	python2.7 -m easybuild.main \
	--optarch=GENERIC \
	--robot=$HOME/ebx/easyconfigs/macosx:$HOME/ebx/easyconfigs/app \
	--prefix=$EB_ROOT/easybuild \
	"$@"

# Options above:
# optarch=GENERIC: Disable architecture-specific optimization on Mac, which produces unknown assembler instructions.

# To re-install one of the three EasyBuild packages, from the main git directory:
# export PYTHONUSERBASE=$EB_ROOT/software/EasyBuild/2.5.0
# python2.7 setup.py install --user


